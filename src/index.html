<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <meta name= "author" content="lzd" >
    <meta name= "viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" type="text/css" href="./static/css/reset.css">
    <link rel="stylesheet" type="text/css" href="./static/css/main.css">

  </head>
<body>
<script type="text/javascript">
!function(e,t){var n=e.documentElement,i="orientationchange"in window?"orientationchange":"resize",d=(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,function(){var t=n.clientWidth;t&&(t>=750?(t=750,e.body.style.width="750px"):e.body.style.width=t+"px",n.style.fontSize=100*(t/750)+"px",n.dataset.width=t,n.dataset.percent=100*(t/750))});d(),e.documentElement.classList.add("iosx"+t.devicePixelRatio),e.addEventListener&&t.addEventListener(i,d,!1)}(document,window)
</script>
<div id="app" class="p-r">

    <!-- 默认上传input -->
    <input id="upload" class="p-a" type="file" accept="image/*" />

    <!-- loading -->
    <div class="loadingDiv" style="display:none">
        <div class="flex">
            <span class="wpr">
                loading...
            </span>
        </div>
    </div>




    <!-- 引导页 -->
    <div id="firstPage" class="flex" style="background-color:#ffe0ab;display:-none;">
        <div class="guide">
            <img src="./static/img/defaultBg.jpg" style="width:84%;">
        </div>
        <div class="wpr">
            发拜年自拍能赚钱  红包接到手软<br/>
            <span class="chooseBtn">我也要做拜年自拍</span>
        </div>
    </div>

    <!-- <div id="test" style="box-sizing:border-box;border:2px green solid;z-index:99999999;position:absolute;left:0;top:0;">
    <img src="">123
    </div> -->
    <div id="megaPixImage"></div>

<canvas id="cropCanvas" class="p-a" style="z-index:1;left:0;background-color:rgba(0,0,0,0)" width="420" height="420"></canvas>
    <div id="cropSection" style="display:none;" >

        <!-- 选择各种主题style -->
        <div class="theme" style="background-color:#ffe0ab;z-index:2;">
            <div id="bgStyle">
                <img src="./static/img/style1.png" id="themeBgImg" style="width:100%;">
                <div id="eCode" class="ecode"><img src="" alt=""></div>
            </div>
             <!-- 默认头像 -->
            <div id="cropLayer" class="defaultPic p-a">
                <div class="wpr">

                     <!-- <canvas id="cropCanvasHead" class="p-a" style="left:2rem;z-index:1999;border:1px #000 solid;" width="420" height="420"></canvas> -->
                    <img id="cropImg" class="p-a" style="top:0" src="./static/img/test1.jpg">
                </div>
            </div>
            <div id="dropArea" class="defaultPic p-a"><span></span></div>
        </div>


        <div class="styleChoose">
            <a href="javascript:void(0)" id="reChoose">重新选择</a>
            <a href="javascript:void(0)" id="toNext">下一步</a>
            <div class="wpr flex">
                <div class="item">style1</div>
                <div class="item">style2</div>
                <div class="item">style3</div>
            </div>
        </div>
    </div>


    <div id="proSection" style="display:none;">
        <div class="view">
            <img src="" alt="">
        </div>
        <div class="txt">
            <a href="javascript:void(0)" id="reChooseb">重新选择</a>
            长按保存 就可以拜年收红包咯
        </div>
    </div>

</div>

<script>
function loadScript(_src,cb){
    var script = document.createElement('script');
    script.type="text/javascript";
    if(script.readyState){
        script.onreadystatechange = function(){
            if(script.readyState == 'loaded' || script.readyState == 'complete'){
                script.onreadystatechange = null;cb && cb();
            }
        }
    } else {
        script.onload = function(){cb && cb()};
    }
    script.src=_src;document.getElementsByTagName('head')[0].appendChild(script);
}
var zeptoJsLoaded = false,
    extJsLoad = false,
    globalJsloaded = false,
    mainJsLoaded = false,
    allJsloaded = false;
var checkAll = function(val){
        console.log("check js this time ok:",val);
        if(zeptoJsLoaded && extJsLoad && globalJsloaded && mainJsLoaded){
            indexPageReady();
            allJsloaded = true;
            checkAll = null;
        }else{return;}
    };
    loadScript('./static/js/zepto.min.js',function(){
        zeptoJsLoaded = true;
        checkAll('zepto');
    })
    loadScript('./static/js/global.js',function(){
        globalJsloaded = true;
        checkAll('global');
    })
    loadScript('./static/js/ext.js',function(){
        extJsLoad = true;
        checkAll('ext');
    })
    loadScript('./static/js/main.js',function(){
        mainJsLoaded = true;
        checkAll('main');
    })

</script>
</body>
</html>